"use strict";const textElement=document.querySelector(".inputText"),listResults=document.querySelector(".listResults"),listFavorites=document.querySelector(".favorites"),btn=document.querySelector(".btn"),url=" http://api.tvmaze.com/search/shows?q=",DEFUALT_IMAGE="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";function init(){const t=JSON.parse(localStorage.getItem("favoritos"));t&&paintedFavorites(t)}function deleteListResults(){listResults.innerHTML=""}function paintLi(t,e){const s=JSON.parse(localStorage.getItem("favoritos"));return s&&s.includes(t)?listResults.innerHTML+=`<li class="liResults favorite" data-title="${t}">\n      <img src="${e}" alt="${t}">\n      <h2 class="liResultsTitle">${t}</h2>\n      </li>`:listResults.innerHTML+=`<li class="liResults" data-title="${t}">\n       <img src="${e}" alt="${t}">\n       <h2 class="liResultsTitle">${t}</h2>\n      </li>`,listResults}function addListener(t){const e=t.querySelectorAll(".liResults");for(const t of e)t.addEventListener("click",toogleFavorite)}function deleteFav(t){const e=JSON.parse(localStorage.getItem("favoritos")),s=t.currentTarget.getAttribute("data-title"),i=e.indexOf(s);e.splice(i,1),localStorage.setItem("favoritos",JSON.stringify(e)),paintedFavorites(e);const o=document.querySelectorAll(".favorite");for(const t of o)t.getAttribute("data-title")===s&&t.classList.remove("favorite")}function paintedFavorites(t){listFavorites.innerHTML="";for(const e of t)listFavorites.innerHTML+=`\n      <li class="liFavorites">\n        <p class="liFavoriteTitle">${e}</p>\n        <button class="btnFav" data-title="${e}"></button>\n      </li>`;const e=document.querySelectorAll(".btnFav");for(const t of e)t.addEventListener("click",deleteFav)}function toogleFavorite(t){const e=t.currentTarget;let s=e.getAttribute("data-title");t.currentTarget.classList.toggle("favorite");const i=JSON.parse(localStorage.getItem("favoritos"))||[];if(e.classList.contains("favorite"))!1===i.includes(s)&&i.push(s);else{const t=i.indexOf(s);t>-1&&i.splice(t,1)}localStorage.setItem("favoritos",JSON.stringify(i)),paintedFavorites(JSON.parse(localStorage.getItem("favoritos")))}function getShowsUrl(t){return`http://api.tvmaze.com/search/shows?q=${t}`}function search(){const t=getShowsUrl(textElement.value);fetch(t).then(t=>t.json()).then(t=>{deleteListResults();let e="",s="";for(const i of t)paintLi(s=i.show.name,e=i.show.image?i.show.image.medium:DEFUALT_IMAGE);addListener(listResults)})}btn.addEventListener("click",search),window.onload=init;