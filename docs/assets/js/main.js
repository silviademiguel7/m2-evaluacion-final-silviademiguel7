"use strict";const textElement=document.querySelector(".inputText"),listResults=document.querySelector(".listResults"),listFavorites=document.querySelector(".favorites"),url=" http://api.tvmaze.com/search/shows?q=",favs=[];function init(){JSON.parse(localStorage.getItem("favoritos"))&&paintedFavorites(JSON.parse(localStorage.getItem("favoritos")))}function deleteListResults(){listResults.innerHTML=""}function paintLi(t,e){const s=JSON.parse(localStorage.getItem("favoritos"));return s&&s.includes(t)?listResults.innerHTML+=`<li class="liResults favorite" data-title='{tituloSerie}'>\n      <img src="${e}" alt="${t}">\n      <h2 class="liResultsTitle">${t}</h2>\n      </li>`:listResults.innerHTML+=`<li class="liResults" data-title='${t}'>\n       <img src="${e}" alt="${t}">\n       <h2 class="liResultsTitle">${t}</h2>\n      </li>`,listResults}function addListener(t){const e=t.querySelectorAll(".liResults");for(const t of e)t.addEventListener("click",savedFavorites)}function deleteFav(t){const e=JSON.parse(localStorage.getItem("favoritos")),s=t.currentTarget.getAttribute("data-id"),i=e.indexOf(s);i>-1&&e.splice(i,1),paintedFavorites(e),localStorage.setItem("favoritos",JSON.stringify(e));const o=document.querySelectorAll(".favorite");for(const t of o)t.getAttribute("data-title")===s&&t.classList.remove("favorite")}function paintedFavorites(t){listFavorites.innerHTML="";for(const e of t)listFavorites.innerHTML+=`<li class="liFavorites"><p class="liFavoriteTitle">${e}</p>\n    <button class="btnFav" data-id="${e}"></button>\n    </li>`;const e=document.querySelectorAll(".btnFav");for(const t of e)t.addEventListener("click",deleteFav)}function savedFavorites(t){const e=t.currentTarget;let s=e.getAttribute("data-title");if(t.currentTarget.classList.toggle("favorite"),e.classList.contains("favorite"))!1===favs.includes(s)&&favs.push(s);else{const t=favs.indexOf(s);t>-1&&favs.splice(t,1)}localStorage.setItem("favoritos",JSON.stringify(favs)),paintedFavorites(JSON.parse(localStorage.getItem("favoritos")))}function petition(){const t=textElement.value;fetch(url+t).then(t=>t.json()).then(t=>{deleteListResults();let e="",s="";for(const i of t){const t=null;s=i.show.name,t===i.show.image?paintLi(s,e="https://via.placeholder.com/210x295/ffffff/666666/?text=TV"):(e=i.show.image.medium,paintLi(s=i.show.name,e))}addListener(listResults)})}const btn=document.querySelector(".btn");btn.addEventListener("click",petition),window.onload=init;